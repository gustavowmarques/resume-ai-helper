<!-- cover_letter.html: Generates AI-written cover letter -->


{% extends "base.html" %}
{% block title %}Cover Letter for {{ job_title }}{% endblock %}

{% block content %}
<h2>Your AI-Generated Cover Letter</h2>
<pre id="letter-content" style="white-space: pre-wrap;">{{ letter }}</pre>

<!-- Buttons for downloading the cover letter -->
<div class="mt-4 d-flex flex-wrap gap-2">
    <a href="/" class="btn btn-secondary">Back to Home</a>
    <button class="btn btn-success" onclick="downloadTxt()">Download as .txt</button>
    <button class="btn btn-outline-primary" onclick="downloadPdf()">Download as .pdf</button>

    <!-- the button appears as long as a cover letter was generated, matching the logic  -->
    {% if letter %}
        <a href="/download_docx" class="btn btn-outline-dark">Download as .docx</a>
        <a href="{{ url_for('download_all') }}" class="btn btn-outline-primary ms-2">Download All (.zip)</a>
    
    <!-- ZIP download button conditional if content is missing -->
    {% else %}
        <p class="text-danger mt-3">Generate a cover letter before downloading it.</p>
    {% endif %}
</div>
{% endblock %}
